<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Observer.min.js"></script>

<!-- Register GSAP -->
<script>
    gsap.registerPlugin(ScrollTrigger, Observer, Flip);
</script>

<!-- Navbar -->
<script>
    const showAnim = gsap.to('.navbar_component', {
        yPercent: -100,
        paused: true,
        duration: 0.2
    });

    Observer.create({
        type: "wheel, touch",
        wheelSpeed: -1,
        onDown: () => toggleNavbarDisplay(false),
        onUp: () => toggleNavbarDisplay(true),
        tolerance: 50
    });

    function toggleNavbarDisplay(hide) {
        if($(".navbar_menu-button").hasClass("w--open")) {
            return;
        }
        hide ? showAnim.play() : showAnim.reverse();
    }
</script>

<!-- Video Testimonials -->
<script>
    $(".video-testimonials_item").each(function () {
        let testimonial = $(this);
        /* We are using a wrapper because the button element has some css transitions that breaks the flip */
        let buttonWrapper = testimonial.find(".video-testimonials-item_button-wrapper");
        let cornerWrapper = testimonial.find(".video-testimonials-item_corner-button-wrapper");
        let centerWrapper = testimonial.find(".video-testimonials-item_center-button-wrapper");

        testimonial.on("mouseenter", function () {
            const buttonState = Flip.getState(buttonWrapper);
            buttonWrapper.appendTo(centerWrapper);
            Flip.from(buttonState, { duration: 0.5, ease: "power3.out" });
        });

        testimonial.on("mouseleave", function () {
            const buttonState = Flip.getState(buttonWrapper);
            buttonWrapper.appendTo(cornerWrapper);
            Flip.from(buttonState, { duration: 0.5, ease: "power3.out" });
        });
    });
</script>

<!-- Agency Numbers -->
<script>
    $(".agengy-numbers_coponent").each(function () {
        let trigger = $(this);
        let agencyNumbersTimeline = gsap.timeline({
            scrollTrigger: {
                trigger: trigger,
                start: "top center",
                end: "bottom center",
                scrub: 1
            }
        });

        agencyNumbersTimeline.from(trigger.find(".big-number-card_component.is-move-down"), { y: "0%"});
    });
</script>

<!-- Code Snippets -->
<script>
    // Footer Copyright
    $('[copyright-year]').text(new Date().getFullYear());

    // Hide section if collection is empty
    $('.w-dyn-empty').parents('[hide-if-empty]').each(function () { $(this).hide() });

    // Keep form height on success
    $(window).bind("load resize submit", function (e) {
        $('form').each(function () {
            var formHeight = $(this).height();
            $(this).siblings('.w-form-done').css({ 'min-height': formHeight });
        });
    });
</script>